<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Station Types - Home</title>
  <style>
    /* [Previous CSS remains unchanged] */
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      background: #f9f9f9;
    }
    header {
      background-color: #008000;
      padding: 15px;
      color: white;
      text-align: center;
    }
    .container {
      max-width: 1200px;
      margin: 30px auto;
      display: flex;
      gap: 20px;
    }
    .left-panel {
      width: 30%;
      display: flex;
      flex-direction: column;
      gap: 20px;
    }
    .aws-info, .arg-info {
      background: white;
      padding: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border-left: 5px solid #008000;
    }
    .main-content {
      width: 70%;
      background: white;
      padding: 25px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      border-left: 5px solid #008000;
    }
    h2 {
      color: #008000;
      margin-top: 0;
    }
    h2 a {
      text-decoration: none;
      color: #008000;
    }
    h2 a:hover {
      text-decoration: underline;
    }
    .indented {
      padding-left: 70px;
      display: block;
    }
    footer {
      text-align: center;
      padding: 10px;
      background: #008000;
      color: white;
      margin-top: 50px;
    }
    .data-section {
      margin-top: 40px;
      padding: 20px;
      border: 2px dashed #008000;
      background: #f1fdf1;
    }
    .data-section h3 {
      color: #008000;
      margin-bottom: 15px;
    }
    .data-section ul {
      list-style-type: none;
      padding: 0;
    }
    .data-section li {
      margin: 8px 0;
    }
    .data-section a {
      color: #006400;
      text-decoration: none;
    }
    .data-section a:hover {
      text-decoration: underline;
    }
    .aws-info select, .arg-info select {
      width: 100%;
      margin-top: 10px;
      padding: 8px;
      border: 1px solid #008000;
      border-radius: 4px;
    }
    .aws-info table, .arg-info table {
      width: 100%;
      margin-top: 10px;
      border-collapse: collapse;
      display: none;
    }
    .aws-info th, .aws-info td, .arg-info th, .arg-info td {
      border: 1px solid #008000;
      padding: 8px;
      text-align: left;
    }
    .aws-info th, .arg-info th {
      background-color: #f1fdf1;
    }
    .no-data {
      color: #888;
      font-style: italic;
      padding: 10px;
    }
  </style>
  <!-- Include Papa Parse CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
</head>
<body>

  <header>
    <h1>Station Types Overview</h1>
  </header>

  <div class="container">
    <!-- Left Panel with AWS and ARG Information -->
    <div class="left-panel">
      <!-- AWS Information -->
      <div class="aws-info">
        <h2>AWS Information</h2>
        <label for="aws-province">Province:</label>
        <select id="aws-province" onchange="updateAWSOptions('district')">
          <option value="">Select Province</option>
        </select>
        <label for="aws-district">District:</label>
        <select id="aws-district" onchange="updateAWSOptions('station')" disabled>
          <option value="">Select District</option>
        </select>
        <label for="aws-station">Station:</label>
        <select id="aws-station" onchange="displayAWSStationInfo()" disabled>
          <option value="">Select Station</option>
        </select>
        <div id="aws-station-details" style="display: none;">
          <h3>Available Sensors</h3>
          <table id="aws-sensor-table">
            <thead>
              <tr>
                <th>Sensor</th>
                <th>Serial Number</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <h3>Activity Log</h3>
          <table id="aws-activity-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Activity</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <!-- ARG Information -->
      <div class="arg-info">
        <h2>ARG Information</h2>
        <label for="arg-province">Province:</label>
        <select id="arg-province" onchange="updateARGOptions('district')">
          <option value="">Select Province</option>
        </select>
        <label for="arg-district">District:</label>
        <select id="arg-district" onchange="updateARGOptions('station')" disabled>
          <option value="">Select District</option>
        </select>
        <label for="arg-station">Station:</label>
        <select id="arg-station" onchange="displayARGStationInfo()" disabled>
          <option value="">Select Station</option>
        </select>
        <div id="arg-station-details" style="display: none;">
          <h3>Available Sensors</h3>
          <table id="arg-sensor-table">
            <thead>
              <tr>
                <th>Sensor</th>
                <th>Serial Number</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <h3>Activity Log</h3>
          <table id="arg-activity-table">
            <thead>
              <tr>
                <th>Date</th>
                <th>Activity</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <p>Below is the list of station types and corresponding stations monitored by Meteo Rwanda.</p>
      <h2><a href="Rwanda Ground Weather Stations Network.xlsx" download> Rwanda Ground Station Network</a></h2>
      <h2><a href="OperationalARG&AWS.xlsx" download> Operational AWS and ARG</a></h2>          
      <h2><a href="AWS.xlsx" download class="indented">1. Automatic Weather Stations</a></h2>
      <h2><a href="ARG.xlsx" download class="indented">2. Automatic Rain Gauges</a></h2>
      <h2><a href="Pricipal Stations.csv" download class="indented">3. Principal Stations</a></h2>
      <h2><a href="Voluntaire.csv" download class="indented">4. Volunteering Stations</a></h2>

      <div class="data-section">
        <h3>Enact Data</h3>
        <h3>Enactdata_StationLevel_DailyData</h3>
        <ul>
          <li><a href="Home/Data/Daily/Tmax.csv" download>üå°Ô∏è Maximum Temperature</a></li>
          <li><a href="Home/Data/Daily/Tmin.csv" download>‚ùÑÔ∏è Minimum Temperature</a></li>
          <li><a href="Home/Data/Daily/Rainfall.csv" download>‚òî Rainfall</a></li>
        </ul>
        <h3>Enactdata_StationLevel_MonthlyData</h3>
        <ul>
          <li><a href="Data/Monthly/Tmax_Monthly.csv" download>üå°Ô∏è Maximum Temperature</a></li>
          <li><a href="Data/Monthly/Tmin_Monthly.csv" download>‚ùÑÔ∏è Minimum Temperature</a></li>
          <li><a href="Data/Monthly/Rainfall_Monthly.csv" download>‚òî Rainfall</a></li>
        </ul>
        <h3>Enactdata_StationLevel_YearlyData</h3>
        <ul>
          <li><a href="Data/Yearly/Tmax_Yearly.csv" download>üå°Ô∏è Maximum Temperature</a></li>
          <li><a href="Data/Yearly/Tmin_Yearly.csv" download>‚ùÑÔ∏è Minimum Temperature</a></li>
          <li><a href="Data/Yearly/Rainfall_Yearly.csv" download>‚òî Rainfall</a></li>
        </ul>
        <h3>Dekads</h3>
        <ul>
          <li><a href="Data/Dekads/dekad2020.xlsx" download>2020</a></li>
          <li><a href="Data/Dekads/dekad2021.xlsx" download>2021</a></li>
          <li><a href="Data/Dekads/dekad2022.xlsx" download>2022</a></li>
          <li><a href="Data/Dekads/dekad2023.xlsx" download>2023</a></li>
          <li><a href="Data/Dekads/dekad2024.xlsx" download>2024</a></li>
        </ul>
      </div>
    </div>
  </div>

  <footer>
    &copy; 2025 Rwanda Meteorology Agency ‚Äî Station Types Summary
  </footer>

  <script>
    // Initialize empty arrays for AWS and ARG stations
    let awsStations = [];
    let argStations = [];

    // Load and parse AWS CSV file
    async function loadAWSStationsFromCSV() {
      try {
        const response = await fetch('aws_stations.csv');
        const text = await response.text();
        const data = Papa.parse(text, { header: true }).data;
        awsStations = data.map(row => ({
          name: row.name,
          province: row.province,
          district: row.district,
          sensors: JSON.parse(row.sensors || '[]'),
          activities: JSON.parse(row.activities || '[]')
        }));
        populateAWSProvinces();
      } catch (error) {
        console.error('Error loading aws_stations.csv:', error);
      }
    }

    // Load and parse ARG CSV file
    async function loadARGStationsFromCSV() {
      try {
        const response = await fetch('arg_stations.csv');
        const text = await response.text();
        const data = Papa.parse(text, { header: true }).data;
        argStations = data.map(row => ({
          name: row.name,
          province: row.province,
          district: row.district,
          sensors: JSON.parse(row.sensors || '[]'),
          activities: JSON.parse(row.activities || '[]')
        }));
        populateARGProvinces();
      } catch (error) {
        console.error('Error loading arg_stations.csv:', error);
      }
    }

    // Populate AWS provinces
    function populateAWSProvinces() {
      const provinceSelect = document.getElementById('aws-province');
      const provinces = [...new Set(awsStations.map(s => s.province))];
      provinces.forEach(province => {
        const option = document.createElement('option');
        option.value = province;
        option.textContent = province;
        provinceSelect.appendChild(option);
      });
    }

    // Update AWS options (districts or stations)
    function updateAWSOptions(level) {
      const province = document.getElementById('aws-province').value;
      const districtSelect = document.getElementById('aws-district');
      const stationSelect = document.getElementById('aws-station');
      districtSelect.disabled = !province || level !== 'district';
      stationSelect.disabled = true;
      clearAWSStationInfo();

      if (province) {
        if (level === 'district') {
          districtSelect.innerHTML = '<option value="">Select District</option>';
          const districts = [...new Set(awsStations
            .filter(s => s.province === province)
            .map(s => s.district))];
          districts.forEach(district => {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          });
        } else if (level === 'station') {
          const district = districtSelect.value;
          stationSelect.innerHTML = '<option value="">Select Station</option>';
          if (district) {
            const filteredStations = awsStations
              .filter(s => s.province === province && s.district === district)
              .map(s => s.name);
            filteredStations.forEach(station => {
              const option = document.createElement('option');
              option.value = station;
              option.textContent = station;
              stationSelect.appendChild(option);
            });
            stationSelect.disabled = false;
          }
        }
      }
    }

    // Populate ARG provinces
    function populateARGProvinces() {
      const provinceSelect = document.getElementById('arg-province');
      const provinces = [...new Set(argStations.map(s => s.province))];
      provinces.forEach(province => {
        const option = document.createElement('option');
        option.value = province;
        option.textContent = province;
        provinceSelect.appendChild(option);
      });
    }

    // Update ARG options (districts or stations)
    function updateARGOptions(level) {
      const province = document.getElementById('arg-province').value;
      const districtSelect = document.getElementById('arg-district');
      const stationSelect = document.getElementById('arg-station');
      districtSelect.disabled = !province || level !== 'district';
      stationSelect.disabled = true;
      clearARGStationInfo();

      if (province) {
        if (level === 'district') {
          districtSelect.innerHTML = '<option value="">Select District</option>';
          const districts = [...new Set(argStations
            .filter(s => s.province === province)
            .map(s => s.district))];
          districts.forEach(district => {
            const option = document.createElement('option');
            option.value = district;
            option.textContent = district;
            districtSelect.appendChild(option);
          });
        } else if (level === 'station') {
          const district = districtSelect.value;
          stationSelect.innerHTML = '<option value="">Select Station</option>';
          if (district) {
            const filteredStations = argStations
              .filter(s => s.province === province && s.district === district)
              .map(s => s.name);
            filteredStations.forEach(station => {
              const option = document.createElement('option');
              option.value = station;
              option.textContent = station;
              stationSelect.appendChild(option);
            });
            stationSelect.disabled = false;
          }
        }
      }
    }

    // Display AWS station information
    function displayAWSStationInfo() {
      const stationName = document.getElementById('aws-station').value;
      const station = awsStations.find(s => s.name === stationName);
      const detailsDiv = document.getElementById('aws-station-details');
      const sensorTable = document.getElementById('aws-sensor-table');
      const activityTable = document.getElementById('aws-activity-table');
      const sensorTableBody = sensorTable.getElementsByTagName('tbody')[0];
      const activityTableBody = activityTable.getElementsByTagName('tbody')[0];

      clearAWSStationInfo();

      if (station) {
        detailsDiv.style.display = 'block';
        sensorTable.style.display = 'table';
        activityTable.style.display = 'table';

        if (station.sensors.length > 0) {
          station.sensors.forEach(sensor => {
            const row = document.createElement('tr');
            row.innerHTML = `<td>${sensor.type}</td><td>${sensor.serialNumber}</td>`;
            sensorTableBody.appendChild(row);
          });
        } else {
          sensorTableBody.innerHTML = '<tr><td colspan="2" class="no-data">No sensors available</td></tr>';
        }

        if (station.activities.length > 0) {
          station.activities.forEach(activity => {
            const row = document.createElement('tr');
            row.innerHTML = `<td>${activity.date}</td><td>${activity.activity}</td>`;
            activityTableBody.appendChild(row);
          });
        } else {
          activityTableBody.innerHTML = '<tr><td colspan="2" class="no-data">No activities available</td></tr>';
        }
      }
    }

    // Display ARG station information
    function displayARGStationInfo() {
      const stationName = document.getElementById('arg-station').value;
      const station = argStations.find(s => s.name === stationName);
      const detailsDiv = document.getElementById('arg-station-details');
      const sensorTable = document.getElementById('arg-sensor-table');
      const activityTable = document.getElementById('arg-activity-table');
      const sensorTableBody = sensorTable.getElementsByTagName('tbody')[0];
      const activityTableBody = activityTable.getElementsByTagName('tbody')[0];

      clearARGStationInfo();

      if (station) {
        detailsDiv.style.display = 'block';
        sensorTable.style.display = 'table';
        activityTable.style.display = 'table';

        if (station.sensors.length > 0) {
          station.sensors.forEach(sensor => {
            const row = document.createElement('tr');
            row.innerHTML = `<td>${sensor.type}</td><td>${sensor.serialNumber}</td>`;
            sensorTableBody.appendChild(row);
          });
        } else {
          sensorTableBody.innerHTML = '<tr><td colspan="2" class="no-data">No sensors available</td></tr>';
        }

        if (station.activities.length > 0) {
          station.activities.forEach(activity => {
            const row = document.createElement('tr');
            row.innerHTML = `<td>${activity.date}</td><td>${activity.activity}</td>`;
            activityTableBody.appendChild(row);
          });
        } else {
          activityTableBody.innerHTML = '<tr><td colspan="2" class="no-data">No activities available</td></tr>';
        }
      }
    }

    // Clear AWS station information
    function clearAWSStationInfo() {
      const detailsDiv = document.getElementById('aws-station-details');
      const sensorTable = document.getElementById('aws-sensor-table');
      const activityTable = document.getElementById('aws-activity-table');
      detailsDiv.style.display = 'none';
      sensorTable.style.display = 'none';
      activityTable.style.display = 'none';
      sensorTable.getElementsByTagName('tbody')[0].innerHTML = '';
      activityTable.getElementsByTagName('tbody')[0].innerHTML = '';
    }

    // Clear ARG station information
    function clearARGStationInfo() {
      const detailsDiv = document.getElementById('arg-station-details');
      const sensorTable = document.getElementById('arg-sensor-table');
      const activityTable = document.getElementById('arg-activity-table');
      detailsDiv.style.display = 'none';
      sensorTable.style.display = 'none';
      activityTable.style.display = 'none';
      sensorTable.getElementsByTagName('tbody')[0].innerHTML = '';
      activityTable.getElementsByTagName('tbody')[0].innerHTML = '';
    }

    // Initialize on page load
    window.onload = async function() {
      await loadAWSStationsFromCSV();
      await loadARGStationsFromCSV();
    };
  </script>
</body>
</html>